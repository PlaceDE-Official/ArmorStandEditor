/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
    //`java-library`
    //`maven-publish`
    id("java")
    id("java-library")
    id("maven-publish")
    id("com.github.johnrengelman.shadow") version "8.1.1"
    id("io.papermc.paperweight.userdev") version "1.5.5"
    id("xyz.jpenilla.run-paper") version "2.1.0" // Adds runServer and runMojangMappedServer tasks for testing
}

repositories {
    mavenLocal()

    maven {
        url = uri("https://repo.papermc.io/repository/maven-public/")
    }

    maven {
        url = uri("https://git.redstonesucht.de/api/packages/DevMiner/maven")
    }

    maven {
        url = uri("https://maven.enginehub.org/repo/")
    }

    maven {
        url = uri("https://oss.sonatype.org/content/groups/public/")
    }

    maven {
        url = uri("https://s01.oss.sonatype.org/content/groups/public/")
    }

    maven {
        url = uri("https://repo.glaremasters.me/repository/towny/")
    }

    maven {
        url = uri("https://repo.glaremasters.me/repository/bloodshot/")
    }

    maven {
        url = uri("https://hub.jeff-media.com/nexus/repository/jeff-media-public/")
    }

    maven {
        url = uri("https://jitpack.io")
    }

    maven {
        url = uri("https://repo.bg-software.com/repository/api/")
    }

    maven {
        url = uri("https://repo.codemc.org/repository/maven-public/")
    }

    maven {
        url = uri("https://libraries.minecraft.net/")
    }

    maven {
        url = uri("https://nexuslite.gcnt.net/repos/other/")
    }

    maven {
        url = uri("https://repo.maven.apache.org/maven2/")
    }
}

java {
    // Configure the java toolchain. This allows gradle to auto-provision JDK 17 on systems that only have JDK 8 installed for example.
    toolchain.languageVersion.set(JavaLanguageVersion.of(17))
}

dependencies {
    paperweight.devBundle("army.place.folia", "1.20.1-R0.1-SNAPSHOT")
    api("com.tcoded:FoliaLib:0.2.4")
    api("com.jeff_media:SpigotUpdateChecker:3.0.3")
    compileOnly("com.github.TechFortress:GriefPrevention:16.18.1")
    compileOnly("com.mojang:authlib:4.0.43")

    compileOnly("org.projectlombok:lombok:1.18.28")
    annotationProcessor("org.projectlombok:lombok:1.18.28")
}

group = "io.github.rypofalem.armorstandeditor"
version = "1.20.1-43.2"
description = "armorstandeditor"
java.sourceCompatibility = JavaVersion.VERSION_17

/*publishing {
    publications.create<MavenPublication>("maven") {
        from(components["java"])
    }
}*/

runPaper.folia.registerTask();

tasks {
    runFolia() {
        minecraftVersion("1.20.1")
        serverJar(file("./run/folia-bundler-1.20.1-R0.1-SNAPSHOT-reobf.jar"))
    }


    reobfJar {
        outputJar.set(layout.buildDirectory.file("${project.buildDir.path}/libs/${project.name}-${version}.jar"))
    }

    jar {
        dependsOn(reobfJar)
    }

    shadowJar {
        relocate("io.papermc.lib", "io.github.rypofalem.armorstandeditor.paperlib")
        relocate("com.tcoded.folialib", "io.github.rypofalem.armorstandeditor.folialib")
    }
}
